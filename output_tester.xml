<?xml version="1.0" ?>
<block label="module_sm">
  <radio label="DUM_COUNTRY" where="execute,report,survey">
    <title>Demography: Country</title>
    <row label="r32" alt="Argentina">Argentina</row>
    <row label="r36" alt="Australia">Australia</row>
    <row label="r40" alt="Austria">Austria</row>
    <row label="r56" alt="Belgium">Belgium</row>
    <row label="r76" alt="Brazil">Brazil</row>
    <row label="r124" alt="Canada">Canada</row>
    <row label="r152" alt="Chile">Chile</row>
    <row label="r156" alt="China">China</row>
    <row label="r170" alt="Colombia">Colombia</row>
    <row label="r208" alt="Denmark">Denmark</row>
    <row label="r250" alt="France">France</row>
    <row label="r276" alt="Germany">Germany</row>
    <row label="r348" alt="Hungary">Hungary</row>
    <row label="r356" alt="India">India</row>
    <row label="r360" alt="Indonesia">Indonesia</row>
    <row label="r372" alt="Ireland">Ireland</row>
    <row label="r380" alt="Italy">Italy</row>
    <row label="r392" alt="Japan">Japan</row>
    <row label="r682" alt="Saudi Arabia">Saudi Arabia</row>
    <row label="r458" alt="Malaysia">Malaysia</row>
    <row label="r484" alt="Mexico">Mexico</row>
    <row label="r528" alt="Netherlands">Netherlands</row>
    <row label="r578" alt="Norway">Norway</row>
    <row label="r608" alt="Philippines">Philippines</row>
    <row label="r616" alt="Poland">Poland</row>
    <row label="r620" alt="Portugal">Portugal</row>
    <row label="r642" alt="Romania">Romania</row>
    <row label="r702" alt="Singapore">Singapore</row>
    <row label="r710" alt="South Africa">South Africa</row>
    <row label="r410" alt="South Korea">South Korea</row>
    <row label="r724" alt="Spain">Spain</row>
    <row label="r752" alt="Sweden">Sweden</row>
    <row label="r792" alt="Turkey">Turkey</row>
    <row label="r784" alt="UAE">UAE</row>
    <row label="r826" alt="UK">UK</row>
    <row label="r840" alt="USA">USA</row>
  </radio>
  <suspend/>
  <radio label="DUM_PARAMOUNT_STUDY" where="execute,report,survey">
    <title>Paramount study flag</title>
    <row label="para">Paramount study</row>
    <row label="non_para">Non Paramount study</row>
  </radio>
  <suspend/>
  <radio label="COUNTRY">
    <title>In which country do you live?</title>
    <comment>${res.SP1}</comment>
    <row label="r32" alt="Argentina">Argentina</row>
    <row label="r36" alt="Australia">Australia</row>
    <row label="r40" alt="Austria">Austria</row>
    <row label="r56" alt="Belgium">Belgium</row>
    <row label="r76" alt="Brazil">Brazil</row>
    <row label="r124" alt="Canada">Canada</row>
    <row label="r152" alt="Chile">Chile</row>
    <row label="r156" alt="China">China</row>
    <row label="r170" alt="Colombia">Colombia</row>
    <row label="r208" alt="Denmark">Denmark</row>
    <row label="r250" alt="France">France</row>
    <row label="r276" alt="Germany">Germany</row>
    <row label="r348" alt="Hungary">Hungary</row>
    <row label="r356" alt="India">India</row>
    <row label="r360" alt="Indonesia">Indonesia</row>
    <row label="r372" alt="Ireland">Ireland</row>
    <row label="r380" alt="Italy">Italy</row>
    <row label="r392" alt="Japan">Japan</row>
    <row label="r682" alt="Saudi Arabia">Saudi Arabia</row>
    <row label="r458" alt="Malaysia">Malaysia</row>
    <row label="r484" alt="Mexico">Mexico</row>
    <row label="r528" alt="Netherlands">Netherlands</row>
    <row label="r578" alt="Norway">Norway</row>
    <row label="r608" alt="Philippines">Philippines</row>
    <row label="r616" alt="Poland">Poland</row>
    <row label="r620" alt="Portugal">Portugal</row>
    <row label="r642" alt="Romania">Romania</row>
    <row label="r702" alt="Singapore">Singapore</row>
    <row label="r710" alt="South Africa">South Africa</row>
    <row label="r410" alt="South Korea">South Korea</row>
    <row label="r724" alt="Spain">Spain</row>
    <row label="r752" alt="Sweden">Sweden</row>
    <row label="r792" alt="Turkey">Turkey</row>
    <row label="r784" alt="UAE">UAE</row>
    <row label="r826" alt="UK">UK</row>
    <row label="r840" alt="USA">USA</row>
    <row label="r98">Other</row>
  </radio>
  <suspend/>
  <terminate label="TERM_COUNTRY" cond="COUNTRY.selected.label != DUM_COUNTRY.selected.label">COUNTRY: No match</terminate>
  <suspend/>
  <radio label="GENDER_FULL">
    <title>Which gender do you identify as?</title>
    <comment>${res.SP1}</comment>
    <row label="r1">Man</row>
    <row label="r2">Transgender Man</row>
    <row label="r3">Woman</row>
    <row label="r4">Transgender Woman</row>
    <row label="r5">Non-binary</row>
    <row label="r98">Prefer to self-describe</row>
    <row label="r99">Prefer not to say</row>
  </radio>
  <suspend/>
  <radio label="GENDER_SHORT">
    <title>Which gender do you identify as?</title>
    <comment>${res.SP1}</comment>
    <row label="r1">Male</row>
    <row label="r2">Female</row>
    <row label="r99" randomize="0">Other gender / Non-binary</row>
  </radio>
  <suspend/>
  <radio label="DUM_GENDER" where="execute,report,survey">
    <title>Gender dummy</title>
    <row label="r1">Male = CODES 1-2 AT GENDER_FULL OR 1 AT GENDER SHORT</row>
    <row label="r2">Female = CODES 3-4 AT GENDER_FULL OR 2 AT GENDER SHORT</row>
    <row label="r3">Other/prefer not to say = CODE 5-7 AT GENDER_FULL OR 3 AT GENDER SHORT</row>
  </radio>
  <suspend/>
  <number label="AGE">
    <title>What is your age?</title>
    <comment>Please enter a number.</comment>
  </number>
  <suspend/>
  <terminate label="TERM_AGE" cond="AGE.check('&lt;18')">AGE: Less than 18</terminate>
  <suspend/>
  <radio label="DUM_AGEBREAK" where="execute,report,survey">
    <title>Age dummy</title>
    <row label="r1">16-24</row>
    <row label="r2">25-34</row>
    <row label="r3">35-44</row>
    <row label="r4">45-54</row>
    <row label="r5">55-64</row>
    <row label="r6">65+</row>
    <row label="r99">None of These</row>
  </radio>
  <suspend/>
  <block label="UK_POSTCODE">
    <exec>
def zipCodeFile(fname, zipHeader):
  try:
      zipCodesData = File( "%s/%s" % (gv.survey.path, fname), zipHeader)
  except IOError:
      zipCodesData = ""
  return zipCodesData

#This is creating a variable (ZIPCODES) that contains our zip code database.
UK_ZIPCODES = zipCodeFile("UK_Postcodes_UPDATED.dat", "Postcode")
    </exec>
    <text label="POSTCODE">
      <title>Please enter the &lt;strong&gt;first part&lt;/strong&gt; of your post code below. To be clear, we only want the part of your post code before the space! 
&lt;br /&gt;&lt;br /&gt;
Please use caps lock – text box is case sensitive
</title>
      <row label="r1">First part of postcode:</row>
    </text>
    <suspend/>
    <exec>
if RECORD:
  print RECORD
  DUM_POSTCODE_INFO.r1.val = RECORD['postcode']
  DUM_POSTCODE_INFO.r2.val = RECORD['name']
  DUM_POSTCODE_INFO.r3.val = RECORD['region/country']
    </exec>
    <suspend/>
    <text label="DUM_POSTCODE_INFO" where="execute,report,survey">
      <title>Location information from postcode</title>
      <row label="r1">Postcode</row>
      <row label="r2">Area</row>
      <row label="r3">Region / Country</row>
    </text>
    <suspend/>
    <exec>
for eachRow in REGION_UK.rows:
  print eachRow.text
  if eachRow.text == DUM_POSTCODE_INFO.r3.val:
    REGION_UK.val = eachRow.index
    break

# EXTRA YORKSHIRE CHECK
if DUM_POSTCODE_INFO.r3.val is not None:
  if 'Yorkshire' in DUM_POSTCODE_INFO.r3.val:
    print "coded yorkshire"
    REGION_UK.val = REGION_UK.r3.index
    </exec>
    <radio label="REGION_UK">
      <title>In which of the following regions do you live?</title>
      <comment>${res.SP1}</comment>
      <row label="r1">North East England</row>
      <row label="r2">North West England</row>
      <row label="r3">Yorkshire &amp; Humberside</row>
      <row label="r4">East Midlands</row>
      <row label="r5">West Midlands</row>
      <row label="r6">East Anglia</row>
      <row label="r7">South East England</row>
      <row label="r8">South West England</row>
      <row label="r9">London</row>
      <row label="r10">Northern Ireland</row>
      <row label="r11">Scotland</row>
      <row label="r12">Wales</row>
    </radio>
    <suspend/>
  </block>
  <block label="US_ZIPCODE">
    <text label="STD_ZIPCODE_US">
      <title>Please enter your 5-digit ZIP code below.</title>
    </text>
    <suspend/>
    <exec>
def zipCodeFile(fname, zipHeader):
  try:
      zipCodesData = File( "%s/%s" % (gv.survey.path, fname), zipHeader)
  except IOError:
      zipCodesData = ""
  return zipCodesData
    </exec>
    <suspend/>
    <exec>
ZIPCODES = zipCodeFile("USZipCode.dat", "ZIPCode")
    </exec>
    <suspend/>
    <exec>
RECORD = ZIPCODES.get(STD_ZIPCODE_US.val )

if RECORD:
  DUM_Zipcode.r1.val = RECORD['cityname']
  DUM_Zipcode.r2.val = RECORD['msa']
  DUM_Zipcode.r3.val = RECORD['msa_name']
  DUM_Zipcode.r4.val = RECORD['state']
  DUM_Zipcode.r5.val = RECORD['statename']
  DUM_Zipcode.r6.val = RECORD['censusdivision']
  DUM_Zipcode.r7.val = RECORD['censusdivisionname']
  DUM_Zipcode.r8.val = RECORD['censusregion']
  DUM_Zipcode.r9.val = RECORD['censusregionname']
    </exec>
    <suspend/>
    <text label="DUM_Zipcode" where="execute,report,survey">
      <title>Hidden Marker: US city name</title>
      <comment>Please enter your answer</comment>
      <row label="r1">CityName</row>
      <row label="r2">MSA</row>
      <row label="r3">MSA_Name&amp;nbsp;</row>
      <row label="r4">State</row>
      <row label="r5">StateName</row>
      <row label="r6">CensusDivision&amp;nbsp;</row>
      <row label="r7">CensusDivisionname</row>
      <row label="r8">CensusRegion&amp;nbsp;</row>
      <row label="r9">CensusRegionname</row>
    </text>
    <suspend/>
    <exec>
for eachrow in DUM_State.rows:
    if eachrow.text == DUM_Zipcode.r5.val:
        DUM_State.val = eachrow.index
        break

for eachrow in DUM_CensusDivision.rows:
    if eachrow.text == DUM_Zipcode.r7.val:
        DUM_CensusDivision.val = eachrow.index
        break

for eachrow in DUM_REGION.rows:
    if eachrow.text == DUM_Zipcode.r9.val:
       DUM_REGION.val = eachrow.index
       break
    elif STD_ZIPCODE_US.r99:
       DUM_REGION.val = DUM_REGION.r5.index
    </exec>
    <suspend/>
    <radio label="DUM_State" randomize="0" where="execute,report,survey">
      <title>Hidden Marker : US State</title>
      <comment>Please select an answer</comment>
      <row label="r1">New York</row>
      <row label="r2">Massachusetts</row>
      <row label="r3">Rhode Island</row>
      <row label="r4">New Hampshire</row>
      <row label="r5">Maine</row>
      <row label="r6">Vermont</row>
      <row label="r7">Connecticut</row>
      <row label="r8">New Jersey</row>
      <row label="r9">Pennsylvania</row>
      <row label="r10">Delaware</row>
      <row label="r11">District of Columbia</row>
      <row label="r12">Virginia</row>
      <row label="r13">Maryland</row>
      <row label="r14">West Virginia</row>
      <row label="r15">North Carolina</row>
      <row label="r16">South Carolina</row>
      <row label="r17">Georgia</row>
      <row label="r18">Florida</row>
      <row label="r19">Alabama</row>
      <row label="r20">Tennessee</row>
      <row label="r21">Mississippi</row>
      <row label="r22">Kentucky</row>
      <row label="r23">Ohio</row>
      <row label="r24">Indiana</row>
      <row label="r25">Michigan</row>
      <row label="r26">Iowa</row>
      <row label="r27">Wisconsin</row>
      <row label="r28">Minnesota</row>
      <row label="r29">South Dakota</row>
      <row label="r30">North Dakota</row>
      <row label="r31">Montana</row>
      <row label="r32">Illinois</row>
      <row label="r33">Missouri</row>
      <row label="r34">Kansas</row>
      <row label="r35">Nebraska</row>
      <row label="r36">Louisiana</row>
      <row label="r37">Arkansas</row>
      <row label="r38">Oklahoma</row>
      <row label="r39">Texas</row>
      <row label="r40">Colorado</row>
      <row label="r41">Wyoming</row>
      <row label="r42">Idaho</row>
      <row label="r43">Utah</row>
      <row label="r44">Arizona</row>
      <row label="r45">New Mexico</row>
      <row label="r46">Nevada</row>
      <row label="r47">California</row>
      <row label="r48">Hawaii</row>
      <row label="r49">Oregon</row>
      <row label="r50">Washington</row>
      <row label="r51">Alaska</row>
    </radio>
    <radio label="DUM_CensusDivision" where="execute,report,survey">
      <title>Hidden Marker : US Census Division&amp;nbsp;</title>
      <comment>Please select an answer</comment>
      <row label="r1">MIDDLE ATLANTIC</row>
      <row label="r2">NEW ENGLAND</row>
      <row label="r3">SOUTH ATLANTIC</row>
      <row label="r4">EAST SOUTH CENTRAL</row>
      <row label="r5">EAST NORTH CENTRAL</row>
      <row label="r6">WEST NORTH CENTRAL</row>
      <row label="r7">MOUNTAIN</row>
      <row label="r8">WEST SOUTH CENTRAL</row>
      <row label="r9">PACIFIC</row>
    </radio>
    <radio label="DUM_REGION" where="execute,report,survey">
      <title>CODE REGION BASED ON ZIP CODE</title>
      <comment>Please select an answer</comment>
      <row label="r1">NORTHEAST</row>
      <row label="r2">MIDWEST</row>
      <row label="r3">SOUTH</row>
      <row label="r4">WEST</row>
      <row label="r5">Prefer not to answer</row>
    </radio>
    <suspend/>
  </block>
  <suspend/>
  <checkbox label="QC_WEEKEND">
    <title>Which, if any, of the following have you done over the past weekend?</title>
    <comment>${res.MP1}</comment>
    <row label="r1">Watched TV</row>
    <row label="r2">Visited Antarctica</row>
    <row label="r3">Flew in a helicopter</row>
    <row label="r4">Played poker</row>
    <row label="r5">Went geocaching</row>
    <row label="r6">Went skiing</row>
    <row label="r7">Visited a flea market</row>
    <row label="r8">Went bungee jumping</row>
    <row label="r99" randomize="0">None of the above</row>
  </checkbox>
  <suspend/>
  <radio label="DUM_QCFLAG_WEEKEND" where="execute,report,survey">
    <title>Hidden VARIABLE for QC_WEEKEND</title>
    <comment>${res.SP1}</comment>
    <row label="Pass">Pass</row>
    <row label="Fail">Fail</row>
  </radio>
  <suspend/>
  <checkbox label="DEVICES_HHLD">
    <title>Which, if any, of these devices do you have in your household, even if you don’t personally use them?</title>
    <comment>${res.MP1}</comment>
    <row label="r1">Desktop/Laptop computer</row>
    <row label="r2">Smartphone (e.g., iPhone, Android phone, etc.)</row>
    <row label="r3">Tablet (e.g., iPad, Android tablet, Amazon Fire tablet, etc.)</row>
    <row label="r4">Smart TV (i.e., TV with internet capabilities built in)</row>
    <row label="r5">Video game console (e.g., Xbox One, PlayStation 4, Nintendo Switch, etc.)</row>
    <row label="r6">Connected TV device/stick (e.g., Roku, Amazon Fire TV, Apple TV, Google Chromecast, Android box, etc.)</row>
    <row label="r7">Smart Speaker with a screen (e.g., Amazon Echo, Google Nest Hub with Smart Display, etc.)</row>
    <row label="r8">Set-Top Box from my cable/satellite TV provider</row>
    <row label="r9">DVD or Blu-ray player (not in a laptop)</row>
    <row label="r10">VR (Virtual Reality) headset (e.g. Google Cardboard, Oculus Rift)</row>
    <row label="r99" randomize="0">None of these</row>
  </checkbox>
  <suspend/>
  <checkbox label="INDUSTRY">
    <title>Do you, or does anyone in your household, work in any of the following industries?</title>
    <comment>${res.MP1}</comment>
    <row label="r1">Television</row>
    <row label="r2">Journalism</row>
    <row label="r3">Advertising</row>
    <row label="r4">Media</row>
    <row label="r5">Market research</row>
    <row label="r6">Fashion</row>
    <row label="r7">Marketing</row>
    <row label="r8">Retail</row>
    <row label="r9">IT</row>
    <row label="r10">Banking</row>
    <row label="r99" randomize="0">None of these</row>
  </checkbox>
  <suspend/>
  <terminate label="TERM_IND" cond="INDUSTRY.r1 or INDUSTRY.r2 or INDUSTRY.r3 or INDUSTRY.r4 or INDUSTRY.r5">INDUSTRY: Wrong industry</terminate>
  <suspend/>
  <radio label="QC_DOG_CONSENT">
    <title>Are you using a screen-reader or any other assistive technology to complete this survey?</title>
    <comment>${res.SP1}</comment>
    <row label="r1">Yes</row>
    <row label="r2">No</row>
  </radio>
  <suspend/>
  <checkbox label="QC_DOG">
    <title>Here are some pictures of dogs. Please select images that show real dogs</title>
    <comment>${res.MP1}</comment>
    <row label="r1" alt="Real dog #1">&lt;img src="https://uk.focusvision.com/survey/selfserve/2222/240210/7247213914.png" class="dog-pic" /&gt;</row>
    <row label="r2" alt="Real dog #2">&lt;img src="https://uk.focusvision.com/survey/selfserve/2222/240210/0433861318.png" class="dog-pic" /&gt;</row>
    <row label="r3" alt="Real dog #3">&lt;img src="https://uk.focusvision.com/survey/selfserve/2222/240210/2378940374.png" class="dog-pic" /&gt;</row>
    <row label="r4" alt="Real dog #4">&lt;img src="https://uk.focusvision.com/survey/selfserve/2222/240210/7105114284.png" class="dog-pic" /&gt;</row>
    <row label="r5" alt="Fake dog #1">&lt;img src="https://uk.focusvision.com/survey/selfserve/2222/240210/4152180908.png" class="dog-pic" /&gt;</row>
    <row label="r6" alt="Fake dog #2">&lt;img src="https://uk.focusvision.com/survey/selfserve/2222/240210/2504245440.png" class="dog-pic" /&gt;</row>
  </checkbox>
  <suspend/>
  <radio label="DUM_QC_DOG" where="execute,report,survey">
    <title>Dog QC result</title>
    <row label="r1">Pass</row>
    <row label="r2">Fail</row>
  </radio>
  <suspend/>
  <block label="USA_ETHNICITY">
    <radio label="USA_ETHNICITY_1">
      <title>Are you Spanish, Hispanic, or Latinx such as Mexican, Mexican-American, Chicano, Puerto Rican, Cuban, or another Spanish, Hispanic, or Latinx group?</title>
      <comment>${res.SP1}</comment>
      <row label="r1">Yes</row>
      <row label="r2">No</row>
    </radio>
    <suspend/>
    <checkbox label="USA_ETHNICITY_2">
      <title>What is your racial background?</title>
      <comment>${res.MP1}</comment>
      <row label="r1">Asian / Asian-American</row>
      <row label="r2">Black / African-American</row>
      <row label="r3">White / Caucasian</row>
      <row label="r98" randomize="0">Other</row>
    </checkbox>
    <suspend/>
    <checkbox label="DUM_US_ETH_1" where="execute,report,survey">
      <title>Ethnicity 1</title>
      <row label="r1">Black Hisp</row>
      <row label="r2">Black Non Hisp</row>
      <row label="r3">White Hisp</row>
      <row label="r4">White Non Hisp</row>
      <row label="r5">Other Hisp</row>
      <row label="r6">Other Non Hisp</row>
    </checkbox>
    <suspend/>
    <radio label="USA_ETHNICITY_QUOTA" where="execute,report,survey">
      <title>HIDDEN QUESTION FOR USA ETHNICITY QUOTA</title>
      <row label="r1">Black Hisp</row>
      <row label="r2">Black Non Hisp</row>
      <row label="r3">White Hisp</row>
      <row label="r4">White Non Hisp</row>
      <row label="r5">Other Hisp</row>
      <row label="r6">Other Non Hisp</row>
    </radio>
    <suspend/>
  </block>
  <suspend/>
  <radio label="QC_ATTENTION">
    <title>How much do you agree or disagree that each of the words below describe you?</title>
    <comment>${res.SP1}</comment>
    <row label="r1">Sophisticated</row>
    <row label="r2">Elegant</row>
    <row label="r3">Funny</row>
    <row label="r4">Select “Agree slightly” for this item</row>
    <row label="r5">Edgy</row>
    <col label="c1">Agree strongly</col>
    <col label="c2">Agree slightly</col>
    <col label="c3">Neither agree nor disagree</col>
    <col label="c4">Disagree slightly</col>
    <col label="c5">Disagree strongly</col>
  </radio>
  <suspend/>
  <radio label="DUM_QCFLAG_ATTENTION" where="execute,report,survey">
    <title>Hidden VARIABLE for QC_ATTENTION</title>
    <comment>${res.SP1}</comment>
    <row label="Pass">Pass</row>
    <row label="Fail">Fail</row>
  </radio>
  <suspend/>
  <radio label="QC_CONTRADICTION">
    <title>How much do you agree or disagree with each of the following statements?</title>
    <comment>${res.SP1}</comment>
    <row label="r1">I love shopping for things online</row>
    <row label="r2">I can accomplish anything I want if I work hard enough</row>
    <row label="r3">The music I listen to is an important part of my identity</row>
    <row label="r4">These days having access to the internet is a basic human right</row>
    <row label="r5">I hate shopping for things online</row>
    <row label="r6">Everyone should be responsible for protecting the environment</row>
    <col label="c1">Agree strongly</col>
    <col label="c2">Agree slightly</col>
    <col label="c3">Neither agree nor disagree</col>
    <col label="c4">Disagree slightly</col>
    <col label="c5">Disagree strongly</col>
  </radio>
  <suspend/>
  <radio label="DUM_QCFLAG_CONTRADICTION" where="execute,report,survey">
    <title>Hidden VARIABLE for QC_CONTRADICTION</title>
    <comment>${res.SP1}</comment>
    <row label="Pass">Pass</row>
    <row label="Fail">Fail</row>
  </radio>
  <suspend/>
  <number label="DUM_QC" where="execute,report,survey">
    <title>Quality control: count of fails</title>
    <comment>${res.N1}</comment>
  </number>
  <suspend/>
  <radio label="DUM_QCSCREENER_TERM" where="execute,report,survey">
    <title>Hidden VARIABLE to Term people who failed 2 QC checks</title>
    <comment>${res.SP1}</comment>
    <row label="r1">Pass</row>
    <row label="r2">Fail</row>
  </radio>
  <suspend/>
  <terminate label="TERM_QC" cond="DUM_QCSCREENER_TERM.r2">Failed 2+ QC checks</terminate>
  <suspend/>
</block>
